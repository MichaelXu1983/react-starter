(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{387:function(e,t,a){e.exports={"home-container":"_26BQdbsDE9eiabXTBPIOxF",content:"_3cHU6gjQnWuTPZwFIK08cW","separator-container":"_2HX6LysIhJQ92zxQVrMYr2","render-footer":"_3T6nfmXbfI4hd66uoqLF-v","listview-container":"_2hP62yPb8nooqak7s2faxL",header:"sGMfEvDPb620i5Xwlbiss",title:"_1VB99vg_dsHs7jam1BQOag",date:"_2o9XMHvXpCA-fWS93ZfKjt",intro:"hdyUTCRAzMG9Fgpl1sWIV",link:"_3yDStqwHcXNflpTstQvrLN"}},388:function(e,t,a){e.exports=a.p+"static/media/activity.2770fb72.svg"},389:function(e,t,a){e.exports=a.p+"static/media/message.527b40b2.svg"},406:function(e,t,a){"use strict";a.r(t);a(368);var s=a(370),r=a.n(s),n=(a(147),a(116)),c=a.n(n),o=(a(378),a(380)),i=a.n(o),u=(a(381),a(383)),l=a.n(u),h=a(122),d=a(32),f=a(11),p=a(12),g=a(15),m=a(13),j=a(14),v=a(0),b=a.n(v),E=a(10),R=a.n(E),D=a(36),w=a(20),N=a(27),y=a.n(N),P=a(39),S=a(70),L=a(48);function I(){return(I=Object(P.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(L.a)("/v4/projects?".concat(Object(S.stringify)(t))));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(){return(O=Object(P.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(L.a)("/v4/users?".concat(Object(S.stringify)(t))));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var k=a(387),_=a.n(k),M=a(121),H=a(23),U=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(m.a)(t).call(this,e))).fetchProjectsList=function(e){(function(e){return I.apply(this,arguments)})(Object(d.a)({page:a.state.projectsPageNo},a.defRequestPara)).then(function(t){var s=t.reverse();a.projectsData=a.state.projectsRefreshing?Object(h.a)(s):[].concat(Object(h.a)(a.projectsData),Object(h.a)(s)),a.setState({projectsDataSource:a.state.projectsDataSource.cloneWithRows(a.projectsData),height:e,projectsRefreshing:!1,projectsIsLoading:!1,projectsHasMore:0!==t.length})}).catch(function(){a.setState({projectsRefreshing:!1,projectsIsLoading:!1})})},a.fetchUsersList=function(e){(function(e){return O.apply(this,arguments)})(Object(d.a)({page:a.state.usersPageNo},a.defRequestPara)).then(function(t){var s=t.reverse();a.usersData=a.state.usersRefreshing?Object(h.a)(s):[].concat(Object(h.a)(a.usersData),Object(h.a)(s)),a.setState({usersDataSource:a.state.usersDataSource.cloneWithRows(a.usersData),height:e,usersRefreshing:!1,usersIsLoading:!1,usersHasMore:0!==t.length})}).catch(function(){a.setState({usersRefreshing:!1,usersIsLoading:!1})})},a.onRefreshProjects=function(){a.state.projectsIsLoading||a.setState({projectsRefreshing:!0,projectsIsLoading:!0,projectsPageNo:1},function(){a.fetchProjectsList(a.state.height)})},a.onRefreshUsers=function(){a.state.usersIsLoading||a.setState({usersRefreshing:!0,usersIsLoading:!0,usersPageNo:1},function(){a.fetchUsersList(a.state.height)})},a.onEndReachedProjects=function(e){!a.state.projectsIsLoading&&a.state.projectsHasMore&&a.setState({projectsIsLoading:!0,projectsRefreshing:!1,projectsPageNo:a.state.projectsPageNo+1},function(){a.fetchProjectsList(a.state.height)})},a.onEndReachedUsers=function(e){!a.state.usersIsLoading&&a.state.usersHasMore&&a.setState({usersIsLoading:!0,usersRefreshing:!1,usersPageNo:a.state.usersPageNo+1},function(){a.fetchUsersList(a.state.height)})},a.state={projectsDataSource:new l.a.DataSource({rowHasChanged:function(e,t){return e!==t}}),projectsRefreshing:!0,projectsIsLoading:!0,projectsHasMore:!0,projectsPageNo:1,usersDataSource:new l.a.DataSource({rowHasChanged:function(e,t){return e!==t}}),usersRefreshing:!0,usersIsLoading:!0,usersHasMore:!1,usersPageNo:1,height:document.documentElement.clientHeight},a.projectsData=[],a.usersData=[],a.defRequestPara={order_by:"created_at",sort:"desc",per_page:10,simple:"undefined"===typeof a.currentUser},a}return Object(j.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){var e=this.state.height-R.a.findDOMNode(this.lv).offsetTop;this.fetchProjectsList(e),this.fetchUsersList(e)}},{key:"render",value:function(){var e=this,t=this.state,s=t.projectsDataSource,n=t.usersDataSource,o=(t.allReadStatus,[{title:b.a.createElement(i.a,null,"\u6700\u65b0\u9879\u76ee")},{title:b.a.createElement(i.a,null,"\u6700\u6d3b\u8dc3\u7528\u6237")}]),u=this.projectsData.length-1,h=function(t,a,s){u<0&&(u=e.projectsData.length-1);var r=e.projectsData[u--];return b.a.createElement("div",{key:s,className:_.a["listview-container"]},b.a.createElement("div",{className:_.a.header},b.a.createElement("div",{className:_.a.title},r.name),b.a.createElement("div",{className:_.a.date},Object(H.a)("yyyy-MM-dd",new Date(r.created_at)))),b.a.createElement("div",{className:_.a.intro},r.description),b.a.createElement("div",{className:_.a.link},b.a.createElement("a",{href:r.http_url_to_repo},"\u67e5\u770b\u8be6\u60c5")))},d=this.usersData.length-1,f=function(t,a,s){d<0&&(d=e.usersData.length-1);var r=e.usersData[d--];return b.a.createElement("div",{key:s,className:_.a["listview-container"]},b.a.createElement("div",{className:_.a.header},b.a.createElement("div",{className:_.a.title},r.name),b.a.createElement("div",{className:_.a.date},Object(H.a)("yyyy-MM-dd",new Date(r.created_at)))),b.a.createElement("div",{className:_.a.image},b.a.createElement("img",{src:r.avatar_url,alt:""})),b.a.createElement("div",{className:_.a.link},b.a.createElement("a",{href:r.website_url},"website")))};return b.a.createElement("div",{className:_.a["home-container"]},b.a.createElement(r.a,{tabs:o,initialPage:0,swipeable:!1,usePaged:!1,onChange:function(e,t){console.log("onChange",t,e)},onTabClick:function(e,t){console.log("onTabClick",t,e)},className:_.a["tabs-container"]},b.a.createElement("div",{className:_.a.content},b.a.createElement(l.a,{key:h.rowID,ref:function(t){return e.lv=t},dataSource:this.state.projectsDataSource,renderFooter:function(){return b.a.createElement("div",{className:_.a["render-footer"]},0!==s.rowIdentities.length&&""!==s.rowIdentities[0]?e.state.projectsIsLoading?"\u52a0\u8f7d\u4e2d...":e.state.projectsHasMore?"\u4e0b\u62c9\u52a0\u8f7d\u66f4\u591a":"\u5df2\u52a0\u8f7d\u5b8c\u6210":b.a.createElement(M.a,{img:b.a.createElement("img",{src:a(388),alt:"empty"}),text:"\u6682\u65e0\u9879\u76ee"}))},renderRow:h,renderSeparator:function(e,t){return b.a.createElement("div",{key:"".concat(e,"-").concat(t),className:_.a["separator-container"]})},className:_.a["projects-list"],style:{height:this.state.height,overflow:"auto"},scrollRenderAheadDistance:500,pullToRefresh:b.a.createElement(c.a,{refreshing:this.state.projectsRefreshing,onRefresh:this.onRefreshProjects}),onEndReached:this.onEndReachedProjects,onEndReachedThreshold:10,pageSize:5})),b.a.createElement("div",{className:_.a.content},b.a.createElement(l.a,{key:f.rowID,ref:function(t){return e.lv=t},dataSource:this.state.usersDataSource,renderFooter:function(){return b.a.createElement("div",{className:_.a["render-footer"]},0!==n.rowIdentities.length&&""!==n.rowIdentities[0]?e.state.usersIsLoading?"\u52a0\u8f7d\u4e2d...":e.state.usersHasMore?"\u4e0b\u62c9\u52a0\u8f7d\u66f4\u591a":"\u5df2\u52a0\u8f7d\u5b8c\u6210":b.a.createElement(M.a,{img:b.a.createElement("img",{src:a(389),alt:"empty"}),text:"\u6682\u65e0\u7528\u6237"}))},renderRow:f,renderSeparator:function(e,t){return b.a.createElement("div",{key:"".concat(e,"-").concat(t),className:_.a["separator-container"]})},className:_.a["projects-list"],style:{height:this.state.height,overflow:"auto"},scrollRenderAheadDistance:500,pullToRefresh:b.a.createElement(c.a,{refreshing:this.state.usersRefreshing,onRefresh:this.onRefreshUsers}),onEndReached:this.onEndReachedUsers,onEndReachedThreshold:10,pageSize:5}))))}}]),t}(v.PureComponent);t.default=Object(w.g)(Object(D.b)(function(e){return{currentUser:e.user.currentUser}})(U))}}]);
//# sourceMappingURL=15.c39ade9b.chunk.js.map